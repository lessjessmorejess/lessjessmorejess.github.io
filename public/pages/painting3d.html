<!DOCTYPE html>
<head>
  <link rel="stylesheet/less" type="text/css" href="/public/styles/painting3d.less" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js" ></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

</head>
<body>
  Scope out P5 "processing" for 3D stuff
  <section>
  <div id="pbg">
    <div>
    </div>
  </div>
  <div class="scene idle">
    <div id="box" class="idle" style="transform: translateZ(-200px) rotateY(-15deg)">
      <div class="box__face box__face--front"></div>
      <div class="box__face box__face--behind"></div>
      <div class="box__face box__face--back"></div>
      <div class="box__face box__face--right"></div>
      <div class="box__face box__face--right--inside"></div>
      <div class="box__face box__face--left"></div>
      <div class="box__face box__face--left--inside"></div>
      <div class="box__face box__face--top"></div>
      <div class="box__face box__face--top--inside"></div>
      <div class="box__face box__face--bottom"></div>
      <div class="box__face box__face--bottom--inside"></div>
    </div>
  </div>
  <ul id="angles">
    <li class="iAngle" name="rotate-cube-side" value="-135" > qbleft </li>
    <li class="iAngle" name="rotate-cube-side" value="-90" > left </li>
    <li class="iAngle" name="rotate-cube-side" value="-45" > qleft </li>
    <li class="iAngle" name="rotate-cube-side" value="0"> front </li>
    <li class="iAngle" name="rotate-cube-side" value="45" > qright </li>
    <li class="iAngle" name="rotate-cube-side" value="90" > right </li>
    <li class="iAngle" name="rotate-cube-side" value="135" > qbright </li>
    <li class="iAngle" name="rotate-cube-side" value="180" > back </li>
  </ul>


</section>
<script>
var box = document.querySelector('#box');
var scene = document.querySelector('.scene');
var background = document.querySelector('#pbg div');

var currentClass = '';
$( ".iAngle" ).hover(function(){
  clearInterval(id);
 // var showClass = 'show-' + $(this).val();
  var propClass = 'prop-' + $(this).val();
  scene.classList.remove("idle")
  box.classList.remove("idle")
  background.classList.add("hover")
  console.log(propClass)
  if ( currentClass ) {
    box.classList.remove( currentClass );
  }
  
  
  //box.classList.add( showClass );
  box.classList.add( propClass );
  currentClass = propClass;
  
  
});
$('#angles').mouseleave(function(){
  $("#box").removeClass();
  box.classList.add("idle");
  scene.classList.add("idle");
  background.classList.remove("hover")
  //box.style['transform'] = 'transform: rotateY(0deg);';
  box.style['transform'] = `translateZ(-200px) rotateY(-50deg)`
  startIdleSpinAnimation()
})

function ScalePainting(width){
less.modifyVars({
  '@width': width + 'px'
});
}


//TODO: Set the animation speed to be faster when returning to the idle spin
//TODO: Get the animation to start on the first cycle
//TODO: Set correct variables
var id = null;
function startIdleSpinAnimation() {
  console.log('Start Rotate')
  let zPos = -200;
  let yRot = -50;
  let start = true;
  clearInterval(id);
  id = setInterval(frame, 4800);
  function frame() {
    console.log("Rotate Right:" + start)
    if (start){
      box.style['transform'] = `translateZ(-200px) rotateY(-50deg)`
    }
    else{
      box.style['transform'] = `translateZ(-200px) rotateY(-15deg)`
    }
    start = !start;
  }
  frame()
  
}
startIdleSpinAnimation()



</script>
</body>
